# Infrastructure a Code ðŸ’¡


This repo helps you create a Virtual Private Cloud (VPC) with 3 public subnets and 3 private subnets, each in different availability zones. Each of the 3 availability zones must have one public and one private subnet.


## Prerequisites

Before getting started, make sure you have the following:

- Pulumi CLI installed

- AWS CLI installed and configured with necessary credentials.


## Setup ðŸ§©

## 1. Create a Pulumi Project

```js
pulumi new aws-javascript
```

## 2. Install dependencies

```js
npm i
```

**3. Edit pulumi.dev.yaml file to configure VPC & subnets**

**4. Configure your AWS credentials**

### AWS IAM Setup

### IAM User Groups
- I've created dev, demo (prod) profiles by following below steps:

- Create a user group named *csye6225-ta* with ReadOnlyAccess privileges.
Follow the above two steps for dev and prod accounts.


### IAM Users
- Create a user by providing the username.
- Add the username user to the user group csye6225-ta created above.
- Do not configure credentials for the users. Leave the default setting "Autogenerated password" checked and copy the generated password. AWS does not email autogenerated passwords. You need to manually send the email with the password.

### VPC
Create a VPC with a specific CIDR Block.

### Security Groups
- Created a custom security group allowing ingress rules to allow TCP traffic on our VPC:
  
- SSH protocol on PORT 22.
- HTTP protocol on PORT 80.
- HTTPS protocol on PORT 443.
- PORT 8080 for our webapp to be hosted on.
- Their IPs should be accessible from anywhere in the world.

### RDS (Relational Database Service)
- Created a Postgres RDS instance with specified configurations.

### Load Balancer
- Created an Application Load Balancer with specified configurations.
- Configured listeners and target groups.

### Auto Scaling
- Created an Auto Scaling Group with scaling policies and CloudWatch alarms.


### AWS Lambda
- Created an IAM role and attached policies for Lambda function.
- Defined and created an AWS Lambda function with dependencies on S3 bucket.
  
### SNS (Simple Notification Service)

- Created an SNS topic and subscription for Lambda function.

  
### AWS CloudWatch Alarms
- Created CloudWatch alarms for scaling based on CPU utilization.


### Route53
- Created a Route53 record for the load balancer.

  
### AWS DynamoDB
- Created a DynamoDB table with specified attributes and global secondary indexes.
- Configured an IAM policy for DynamoDB access and attached it to the Lambda execution role.

##  Google Cloud Platform (GCP) Resources

### Cloud Storage (GCS)
- Created a GCS bucket named "csye6225_demo_gcs_bucket" with versioning enabled.
  
### GCP IAM
- Created a service account with necessary permissions and attached it to the GCS bucket.
  
### GCP IAM Policy
- Attached a custom IAM policy for the Lambda execution role for GCS access.

